<!-- _layouts/default.html -->

<!DOCTYPE html>
<html lang="en">
  {% include head.html %}
  <body>
    <header class="topbar">
      <button id="menu-toggle" class="material-icons"aria-label="Toggle menu">menu</button>
      <span class="site-title">Polarization</span>
    </header>
    <div id="overlay"></div>
    <div class="layout">
      <aside id="sidebar" class="sidebar">{% include sidebar.html %}</aside>
      <main id="main-content">{{ content }}</main>
    </div>
    
    <script>
      function getCssVariable(name) {
        return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
      }
      
      const menuToggle = document.getElementById('menu-toggle');
      const sidebar = document.getElementById('sidebar');
      const main = document.getElementById('main-content');
      const overlay = document.getElementById('overlay');


      //menu button behavior
      toggleButton.addEventListener('click', () => {
        const isWide = window.innerWidth > 1200;
        const isHidden = sidebar.classList.contains('hidden');
        const isActive = sidebar.classList.contains('active');
      
        // Сброс всех состояний
        sidebar.classList.remove('hidden', 'active');
      
        if (isWide) {
          if (!isHidden) {sidebar.classList.add('hidden');}
        } else {
          if (!isActive) {sidebar.classList.add('active');}
        }
      });

      //overlay click behavior
      overlay.addEventListener('click', () => {
        sidebar.classList.add('close');
        main.classList.remove('shifted');
        overlay.classList.remove('active');
        menuToggle.textContent = 'menu';
      });
      
    </script>
  </body>
</html>
