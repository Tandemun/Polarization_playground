<!-- _includes/sidebar.html -->


<div class="sidebar">
  <nav>
    <ul>
      <li><a href="{{ site.baseurl }}">Home</a></li>
      <li>
        <a href="#">Optical Plates</a>
        <ul>
          <li><a href="{{ site.baseurl }}/pages/half-wave-plate">Half-Wave Plate</a></li>
          <li><a href="{{ site.baseurl }}/pages/quater-wave-plate">Quarter-Wave Plate</a></li>
          <li><a href="{{ site.baseurl }}/pages/elliptical-plate">Elliptical Plate</a></li>
        </ul>
      </li>
      <li>
        <a href="#">Polarization Controllers</a>
        <ul>
          <li><a href="{{ site.baseurl }}/pages/3-paddle-controller">Basic Controller</a></li>
          <li><a href="{{ site.baseurl }}/pages/advanced-polarization-controller">Advanced Controller</a></li>
        </ul>
      </li>
      <li><a href="{{ site.baseurl }}/pages/faraday-mirror">Faraday Mirror</a></li>
    </ul>
  </nav>
</div>
<script>
  document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.sidebar nav ul li > a').forEach(function(link) {
      link.addEventListener('click', function(event) {
        var subMenu = link.nextElementSibling;

        if (subMenu && subMenu.tagName === 'UL') {
          event.preventDefault();

          if (subMenu.style.display === 'block') {
            subMenu.style.display = 'none';
            localStorage.setItem(link.href, 'closed');
          } else {
            subMenu.style.display = 'block';
            localStorage.setItem(link.href, 'open');
          }
        }
      });

      var subMenu = link.nextElementSibling;
      if (subMenu && subMenu.tagName === 'UL') {
        var savedState = localStorage.getItem(link.href);
        if (savedState === 'open') {
          subMenu.style.display = 'block';
        } else {
          subMenu.style.display = 'none';
        }
      }
    });
  });
</script>
