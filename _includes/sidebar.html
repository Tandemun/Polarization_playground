<!-- _includes/sidebar.html -->


<div class="sidebar">
  <nav>
    <ul>
      <li><a href="{{ site.baseurl }}">Home</a></li>
      <li>
        <a href="#">Optical Plates</a>
        <ul>
          <li><a href="{{ site.baseurl }}/pages/half-wave-plate">Half-Wave Plate</a></li>
          <li><a href="{{ site.baseurl }}/pages/quater-wave-plate">Quarter-Wave Plate</a></li>
          <li><a href="{{ site.baseurl }}/pages/elliptical-plate">Elliptical Plate</a></li>
        </ul>
      </li>
      <li>
        <a href="#">Polarization Controllers</a>
        <ul>
          <li><a href="{{ site.baseurl }}/pages/3-paddle-controller">Basic Controller</a></li>
          <li><a href="{{ site.baseurl }}/pages/advanced-polarization-controller">Advanced Controller</a></li>
        </ul>
      </li>
      <li><a href="{{ site.baseurl }}/pages/faraday-mirror">Faraday Mirror</a></li>
    </ul>
  </nav>
</div>
<script>
  document.querySelectorAll('.sidebar nav ul li').forEach(function(item) {
  const menuId = item.querySelector('a').innerText.trim(); // Получаем текст пункта меню

  // Проверяем, если состояние подменю сохранено в localStorage
  if (localStorage.getItem(menuId) === 'open') {
    item.querySelector('ul').style.display = 'block'; // Разворачиваем подменю
  } else {
    item.querySelector('ul').style.display = 'none'; // Скрываем подменю
  }

  // Обработчик клика по ссылке
  item.querySelector('a').addEventListener('click', function(event) {
    const subMenu = item.querySelector('ul');
    if (subMenu) {
      const isVisible = subMenu.style.display === 'block';
      
      // Сохраняем состояние в localStorage
      localStorage.setItem(menuId, isVisible ? 'closed' : 'open');

      // Переключаем видимость подменю
      subMenu.style.display = isVisible ? 'none' : 'block';
    }
  });
});
</script>
